@using Microsoft.AspNetCore.Identity
@inject UserManager<IdentityUser> UserManager

@{
    string greetingMessage;
    var currentHour = DateTime.Now.Hour;
    var userName = User.Identity.IsAuthenticated ? User.Identity.Name : "Misafir";

    if (currentHour < 12)
    {
        greetingMessage = "Günaydın";
    }
    else if (currentHour < 18)
    {
        greetingMessage = "İyi Günler";
    }
    else
    {
        greetingMessage = "İyi Akşamlar";
    }

    greetingMessage += ", " + userName;
}
<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - Admin Paneli</title>
    <!-- External CSS Resources -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700&subset=latin-ext" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        /* *********************************************************************
               CodePen’de jaca90/pen/vZJZMx’nin derlenmiş CSS’si – Orijinal stil
            ********************************************************************** */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            font-family: "Open Sans", sans-serif;
            font-size: 14px;
            overflow: hidden;
            background-color: #f3f3f3;
            color: #102c58;
        }

        * {
            box-sizing: border-box;
        }

        ::-webkit-input-placeholder {
            color: #c3c3c3;
        }

        p {
            color: #ababab;
        }

        h1 {
            font-size: 24px;
        }

        h2 {
            font-size: 20px;
        }

        h3 {
            font-size: 18px;
        }

        .u-list {
            margin: 0;
            padding: 0;
            list-style: none;
        }

        .u-input {
            outline: none;
            border: 1px solid #d0d0d0;
            padding: 5px 10px;
            height: 35px;
            font-size: 12px;
            border-radius: 10px;
            background-clip: padding-box;
        }

        .c-badge {
            font-size: 10px;
            font-weight: 700;
            min-width: 20px;
            padding: 5px;
            border-radius: 4px;
            display: block;
            line-height: 0.7;
            color: #fff;
            text-align: center;
            white-space: nowrap;
            background-color: #102c58;
            border: 1px solid #0f234f;
        }

        .c-badge--red {
            background-color: #f91605;
            border: 1px solid #d10e00;
        }

        .c-badge--blue {
            background-color: #5f9cfd;
            border: 1px solid #4e8de0;
        }

        .c-badge--header-icon {
            position: absolute;
            bottom: -9px;
        }

        .tooltip {
            width: 120px;
        }

        .tooltip-inner {
            padding: 8px 10px;
            color: #fff;
            text-align: center;
            background-color: #051835;
            font-size: 12px;
            border-radius: 3px;
        }

        .tooltip-arrow {
            border-right-color: #051835 !important;
        }

        .hamburger-toggle {
            position: relative;
            padding: 0;
            background: transparent;
            border: 1px solid transparent;
            cursor: pointer;
            order: 1;
        }

            .hamburger-toggle [class*="bar-"] {
                display: block;
                background: #102c58;
                transform: rotate(0deg);
                transition: .2s ease all;
                border-radius: 2px;
                height: 2px;
                width: 24px;
                margin-bottom: 4px;
            }

                .hamburger-toggle [class*="bar-"]:nth-child(2) {
                    width: 18px;
                }

                .hamburger-toggle [class*="bar-"]:last-child {
                    margin-bottom: 0;
                    width: 12px;
                }

            .hamburger-toggle.is-opened {
                left: 3px;
            }

                .hamburger-toggle.is-opened [class*="bar-"] {
                    background: #102c58;
                }

                .hamburger-toggle.is-opened .bar-top {
                    transform: rotate(45deg);
                    transform-origin: 15% 15%;
                }

                .hamburger-toggle.is-opened .bar-mid {
                    opacity: 0;
                }

                .hamburger-toggle.is-opened .bar-bot {
                    transform: rotate(-45deg);
                    transform-origin: 15% 95%;
                    width: 24px;
                }

            .hamburger-toggle:focus {
                outline: none;
            }
        /* Icon butonlarda hover: sadece <i> rengi değişsin */
        .c-header-icon:hover i {
            color: #f5642d !important;
        }

        .hamburger-toggle:hover [class*="bar-"] {
            background: #f5642d !important;
        }

        .header-icons-group {
            display: flex;
            order: 3;
            margin-left: auto;
            height: 100%;
            border-left: 1px solid rgba(255,255,255,0.2);
        }
            /* Sadece logout simgesi kalacak, sepet kaldırıldı */
            .header-icons-group .c-header-icon {
                margin-right: 10px;
            }

        .c-header-icon {
            position: relative;
            display: flex;
            float: left;
            width: 70px;
            height: 100%;
            align-items: center;
            justify-content: center;
            line-height: 1;
            cursor: pointer;
            border-right: 1px solid rgba(255,255,255,0.2);
            background: transparent;
        }

            .c-header-icon i {
                font-size: 18px;
                line-height: 40px;
            }

        .c-header-icon--in-circle {
            border: 1px solid #d0d0d0;
            border-radius: 100%;
        }

        .l-header {
            padding-left: 70px;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            background: #ffffff;
            border-bottom: 1px solid #cccccc;
            transition: padding 0.5s ease-in-out;
        }

        .l-header__inner {
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: stretch;
        }

        body.sidebar-is-expanded .l-header {
            padding-left: 220px;
        }

        .c-search {
            display: flex;
            flex-grow: 1;
            height: 100%;
        }

        .c-search__input {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            border-right: 0;
            width: 100%;
            height: 100%;
            border: 0;
            font-size: 14px;
            padding: 0 20px;
            transition: all 0.3s ease-in-out;
        }

        .c-dropdown {
            display: none;
            opacity: 0;
            position: absolute;
            width: 300px;
            top: 70px;
            right: 0;
            background: #fff;
            overflow: hidden;
            min-height: 300px;
            border: 1px solid #d0d0d0;
            border-radius: 10px;
            box-shadow: 0 5px 14px -1px #cecece;
            transition: all 0.3s ease-in-out;
            z-index: 9999;
        }

        .l-sidebar {
            width: 70px;
            position: absolute;
            z-index: 10;
            left: 0;
            top: 0;
            bottom: 0;
            background: #102c58;
            transition: width 0.5s ease-in-out;
        }

            .l-sidebar .logo {
                width: 100%;
                height: 70px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: #051835;
            }

                .l-sidebar .logo .logo__txt {
                    font-size: 26px;
                    color: #fff;
                    font-weight: 700;
                }

        .l-sidebar__content {
            height: 100%;
            position: relative;
        }

        body.sidebar-is-expanded .l-sidebar {
            width: 220px;
        }

        .c-menu > ul {
            display: flex;
            flex-direction: column;
        }

        .c-menu__item {
            color: white;
            overflow: hidden;
        }

        .c-menu__item__inner {
            display: flex;
            align-items: center;
            min-height: 60px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.5s ease-in-out;
        }

            .c-menu__item__inner:before {
                position: absolute;
                content: "";
                height: 0;
                width: 2px;
                left: 0;
                top: 50%;
                margin-top: -18px;
                background: #5f9cfd;
                opacity: 0;
                transition: all 0.5s ease-in-out;
            }

        .c-menu__item.is-active .c-menu__item__inner {
            background-color: #1e3e6f;
        }

            .c-menu__item.is-active .c-menu__item__inner:before {
                height: 36px;
                opacity: 1;
            }

        .c-menu__item:not(.is-active):hover .c-menu__item__inner {
            background-color: #f5642d;
        }

        .c-menu__item i {
            flex: 0 0 70px;
            font-size: 16px;
            text-align: center;
            transition: all 0.5s ease-in-out;
        }

        .c-menu-item__expand {
            position: relative;
            left: 100px;
            padding-right: 20px;
            margin-left: auto;
            transition: left 1s ease-in-out;
        }

        body.sidebar-is-expanded .c-menu-item__expand {
            left: 0;
        }

        .c-menu-item__title {
            flex-basis: 100%;
            padding-right: 10px;
            position: relative;
            left: 220px;
            opacity: 0;
            transition: all 0.7s ease-in-out;
        }

        body.sidebar-is-expanded .c-menu-item__title {
            left: 0;
            opacity: 1;
        }

        .c-menu__submenu {
            background: #051835;
            padding: 15px;
            font-size: 12px;
            display: none;
        }

            .c-menu__submenu li {
                padding-bottom: 15px;
                margin-bottom: 15px;
                border-bottom: 1px solid #072048;
                color: #5f9cfd;
            }

                .c-menu__submenu li:last-child {
                    margin: 0;
                    padding: 0;
                    border: 0;
                }

            .c-menu__submenu a {
                text-decoration: none;
                color: inherit;
                display: block;
            }

        main.l-main {
            width: 100%;
            height: 100%;
            padding: 70px 0 0 70px;
            transition: padding 0.5s ease-in-out;
        }

        body.sidebar-is-expanded main.l-main {
            padding-left: 220px;
        }

        .content-wrapper {
            padding: 25px;
            height: 100%;
            overflow: auto;
        }

        .content-wrapper--with-bg .page-content {
            background: #fff;
            border-radius: 3px;
            border: 1px solid #d0d0d0;
            padding: 25px;
        }

        .page-title {
            font-weight: 400;
            margin: 0 0 25px;
        }
        /* *********************************************************************
               Son: CodePen Dashboard / Admin Panel CSS
            ********************************************************************* */
    </style>
</head>
<body class="sidebar-is-reduced">
    <header class="l-header">
        <div class="l-header__inner clearfix">
            <div class="c-header-icon js-hamburger">
                <div class="hamburger-toggle">
                    <span class="bar-top"></span>
                    <span class="bar-mid"></span>
                    <span class="bar-bot"></span>
                </div>
            </div>
            <div class="c-search">
                <input class="c-search__input u-input" placeholder="Search..." type="text" />
            </div>
            <div class="greeting-message" style="margin-left: auto; padding-right: 20px;">
                <span>@greetingMessage</span>
            </div>
            <!-- Header Icons: Sadece Logout simgesi kalıyor -->
            <div class="header-icons-group">
                <div class="c-header-icon logout">
                    <form asp-controller="Account" asp-action="Logout" asp-area="" method="post" class="d-inline">
                        @Html.AntiForgeryToken()
                        <button type="submit" style="background: none; border: none;">
                            <i class="fa fa-power-off"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </header>
    <div class="l-sidebar">
        <div class="logo">
            <div class="logo__txt">Admin Panel</div>
        </div>
        <div class="l-sidebar__content">
            <nav class="c-menu js-menu">
                <ul class="u-list">
                    <li class="c-menu__item" data-toggle="tooltip" title="Dashboard">
                        <div class="c-menu__item__inner">
                            <i class='bx bxs-dashboard'></i>
                            <div class="c-menu-item__title">
                                <a href="@Url.Action("Index", "Home", new { area = "Admin" })" style="text-decoration:none; color:inherit;">
                                    <span>Dashboard</span>
                                </a>
                            </div>
                        </div>
                    </li>
                    <li class="c-menu__item" data-toggle="tooltip" title="Kullanıcı Yönetimi">
                        <div class="c-menu__item__inner">
                            <i class='bx bxs-user-detail'></i>
                            <div class="c-menu-item__title">
                                <a href="@Url.Action("Index", "UserManagement", new { area = "Admin" })" style="text-decoration:none; color:inherit;">
                                    <span>Kullanıcı Yönetimi</span>
                                </a>
                            </div>
                        </div>
                    </li>
                    <li class="c-menu__item has-submenu" data-toggle="tooltip" title="Diğer">
                        <div class="c-menu__item__inner">
                            <i class='bx bxs-pin'></i>
                            <div class="c-menu-item__title">
                                <span>Diğer</span>
                            </div>
                            <div class="c-menu-item__expand js-expand-submenu">
                                <i class="fa fa-angle-down"></i>
                            </div>
                        </div>
                        <ul class="c-menu__submenu u-list">
                            <li><a href="#">Diğer 1</a></li>
                            <li><a href="#">Diğer 2</a></li>
                            <li><a href="#">Diğer 3</a></li>
                        </ul>
                    </li>
                    <li class="c-menu__item" data-toggle="tooltip" title="Diğer">
                        <div class="c-menu__item__inner">
                            <i class='bx bxs-pin'></i>
                            <div class="c-menu-item__title">
                                <span>Diğer</span>
                            </div>
                        </div>
                    </li>
                    <li class="c-menu__item" data-toggle="tooltip" title="Diğer">
                        <div class="c-menu__item__inner">
                            <i class='bx bxs-pin'></i>
                            <div class="c-menu-item__title">
                                <span>Diğer</span>
                            </div>
                        </div>
                    </li>
                    <li class="c-menu__item" data-toggle="tooltip" title="Diğer">
                        <div class="c-menu__item__inner">
                            <i class='bx bxs-pin'></i>
                            <div class="c-menu-item__title">
                                <span>Diğer</span>
                            </div>
                        </div>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <main class="l-main">
        <div class="content-wrapper content-wrapper--with-bg">
            <div class="page-content">
                @RenderBody()
            </div>
        </div>
    </main>
    <!-- External JS Resources -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://use.fontawesome.com/2188c74ac9.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script>
        let Dashboard = (() => {
          let global = {
            tooltipOptions: { placement: "right" },
            menuClass: ".c-menu"
          };

          let sidebarChangeWidth = () => {
            $("body").toggleClass("sidebar-is-reduced sidebar-is-expanded");
            $(".hamburger-toggle").toggleClass("is-opened");
            if ($("body").hasClass("sidebar-is-expanded")) {
              localStorage.setItem("sidebarState", "expanded");
              $('[data-toggle="tooltip"]').tooltip("destroy");
            } else {
              localStorage.setItem("sidebarState", "reduced");
              $('[data-toggle="tooltip"]').tooltip(global.tooltipOptions);
            }
          };

          let initSidebarState = () => {
            let state = localStorage.getItem("sidebarState");
            if (!state) {
                state = "expanded";
                localStorage.setItem("sidebarState", "expanded");
            }
            if (state === "expanded") {
              $("body").removeClass("sidebar-is-reduced").addClass("sidebar-is-expanded");
              $(".hamburger-toggle").addClass("is-opened");
            } else {
              $("body").removeClass("sidebar-is-expanded").addClass("sidebar-is-reduced");
              $(".hamburger-toggle").removeClass("is-opened");
            }
          };

          let handleMenuItemClick = function(e) {
            // Bu handler tüm .c-menu__item öğelerinde çalışacak
            // Eğer li'de submenu yoksa, href'yi alıp yönlendirme yapıyoruz.
            if ($(this).hasClass("has-submenu")) return;
            let href = $(this).find("a").attr("href");
            localStorage.setItem("activeMenu", href);
            $(".c-menu__item").removeClass("is-active");
            $(this).addClass("is-active");
            if (href) {
              window.location.href = href;
            }
          };

          let initActiveMenu = () => {
            let active = localStorage.getItem("activeMenu");
            if (active) {
              $(".c-menu__item").removeClass("is-active");
              $(".c-menu__item a").each(function(){
                if ($(this).attr("href") === active) {
                  $(this).closest(".c-menu__item").addClass("is-active");
                }
              });
            }
          };

          return {
            init: () => {
              initSidebarState();
              initActiveMenu();
              $(".js-hamburger").on("click", sidebarChangeWidth);
              $(".c-menu").on("click", ".c-menu__item:not(.has-submenu)", handleMenuItemClick);
              $(".js-expand-submenu").on("click", function(e) {
                e.stopPropagation();
                $(this).closest("li").find(".c-menu__submenu").slideToggle();
              });
              $(".c-header-icon.has-dropdown").on("click", function(e) {
                e.stopPropagation();
                let $dropdown = $(this).find(".c-dropdown");
                if ($dropdown.is(":visible")) {
                  $dropdown.slideUp(function(){ $dropdown.css("opacity", "0"); });
                } else {
                  $dropdown.css("opacity", "1").slideDown();
                }
              });
              $('[data-toggle="tooltip"]').tooltip(global.tooltipOptions);
            }
          };
        })();
        Dashboard.init();
    </script>
    @RenderSection("Scripts", required: false)
</body>
</html>
